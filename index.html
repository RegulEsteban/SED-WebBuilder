<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
	<!--<meta charset="utf-8">-->
	<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
	<title>:: Plan Nacional de Desarrollo ::</title>

	<link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
	<link rel="stylesheet" type="text/css" href="css/main.css"/>
	<link rel="stylesheet" type="text/css" href="css/buttons.css"/>
	<link rel="stylesheet" type="text/css" href="css/normalize.css" />
	<link rel="stylesheet" type="text/css" href="css/transitions.css" />
	<link rel="stylesheet" type="text/css" href="css/objetiv-pages.css" />
	<link rel="stylesheet" type="text/css" href="css/hover-effects.css" />
	<link rel="stylesheet" type="text/css" href="css/loader.css" />
	<link rel="stylesheet" type="text/css" href="css/datatable-custom.css" />
	<link rel="stylesheet" type="text/css" href="css/animation.css" />

	<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
	<meta content="yes" name="apple-mobile-web-app-capable" />
	<meta content="minimum-scale=1.0, width=device-width, maximum-scale=1, user-scalable=no" name="viewport" />
</head>
<body>

<div id="loading">
	<div id="loading-center">
		<div id="loading-center-absolute">
			<div class="object"></div>
			<div class="object"></div>
			<div class="object"></div>
			<div class="object"></div>
			<div class="object"></div>
			<div class="object"></div>
			<div class="object"></div>
			<div class="object"></div>
			<div class="object"></div>
		</div>
	</div>
</div>

<!-- SITE LOADER-->
<div class="siteLoader">
	<div class="head-button"></div>
    <div class="objective3">
		<h2 class="bjective">Plan Nacional de Desarrollo</h2>        
		<p class="projectAbout" style="color:#615c71">2013 - 2018</p>
	</div>
	<h1 class="loaderText"></h1>

</div>
<!-- SITE LOADER END-->

<main class="container-transition">
	<div class="pages">
		<div class="page page--current" ide="0"><!-- intro page -->
			<div id="mainContainer" style="visibility:hidden">
				<section class="container-pnd">
					<div class="head-button2">
						<a href="#" class="viewWork">Regresar a Programas</a>
					</div>
				  <div class="left-half">
					<article>
						
					</article>
				  </div>
				  <div class="right-half">
					<article>
						
					</article>
				  </div>
				</section>
				
				<div class="objective2">
			        <h2 class="anim4 bjective">Plan Nacional de Desarrollo</h2>        
			        <p class="anim5 projectAbout" style="color:#615c71">2013 - 2018</p>
			    </div>
					
				<section class="container-pnd">
				  <div class="left-half">
					<article>
						<h1 class="anim3 projectTitle">Metas para un...</h1>
						<a href="#" id="pazIcon">
							<div class="mix user-interface interactive item" ideMetaIcon="1">
								<div class="workSquare">
									<div class="workContent">
										<div class="workTable">
											<div class="workCell">
												<img src="images/Botones/mex_paz_blan.png" class="secondInnerIcon socarp-second-innner"/>
												<img src="images/Botones/mex_paz_color.png" class="innerIcons socarp-inner">
											</div>
										</div>
									</div>
								</div>
								<span class="caption">M&eacute;xico en Paz</span>
							</div>
						</a>
					
						<a href="#" id="incluyenteIcon">
							<div class="mix user-interface interactive item" ideMetaIcon="2">
								<div class="workSquare">
									<div class="workContent">
										<div class="workTable">
											<div class="workCell">
												<img src="images/Botones/mex_inclu_blan.png" class="secondInnerIcon socarp-second-innner"/>
												<img src="images/Botones/mex_inclu_color.png" class="innerIcons socarp-inner">
											</div>
										</div>
									</div>
								</div>
								<span class="caption">M&eacute;xico Incluyente</span>
							</div>
						</a>
						
						<a href="#0" id="educacionIcon">
							<div class="mix user-interface interactive item" ideMetaIcon="3">
								<div class="workSquare">
									<div class="workContent">
										<div class="workTable">
											<div class="workCell">
												<img src="images/Botones/mex_edu_blan.png" class="secondInnerIcon socarp-second-innner"/>
												<img src="images/Botones/mex_edu_color.png" class="innerIcons socarp-inner">
											</div>
										</div>
									</div>
								</div>
								<span class="caption">M&eacute;xico con educaci&oacute;n de calidad</span>
							</div>
						</a>
						
						<a href="#0" id="prosperoIcon">
							<div class="mix user-interface interactive item" ideMetaIcon="4">
								<div class="workSquare">
									<div class="workContent">
										<div class="workTable">
											<div class="workCell">
												<img src="images/Botones/mex_pros_blan.png" class="secondInnerIcon socarp-second-innner"/>
												<img src="images/Botones/mex_pros_color.png" class="innerIcons socarp-inner">
											</div>
										</div>
									</div>
								</div>
								<span class="caption">M&eacute;xico Pr&oacute;spero</span>
							</div>
						</a>
						
						<a href="#0" id="globalIcon">
							<div class="mix user-interface interactive item" ideMetaIcon="5">
								<div class="workSquare">
									<div class="workContent">
										<div class="workTable">
											<div class="workCell">
												<img src="images/Botones/mex_global_blan.png" class="secondInnerIcon socarp-second-innner"/>
												<img src="images/Botones/mex_global_color.png" class="innerIcons socarp-inner">
											</div>
										</div>
									</div>
								</div>
								<span class="caption">M&eacute;xico con Responsabilidad Global</span>
							</div>
						</a>
					</article>
				  </div>
				  <div class="right-half">
					
					<article>
						<h1 class="anim3 projectTitleInverse">Programas transversales...</h1>
						<a href="#0" id="productividadIcon">
							<div class="mix user-interface interactive item" ideMetaIcon="6">
								<div class="workSquare">
									<div class="workContent">
										<div class="workTable">
											<div class="workCell">
												<img src="images/Botones/democra_mor.png" class="secondInnerIcon socarp-second-innner"/>
												<img src="images/Botones/democra_color.png" class="innerIcons socarp-inner">
											</div>
										</div>
									</div>
								</div>
								<span class="caption">Democratizar la Productividad</span>
							</div>
						</a>
						<a href="#0" id="cercanoIcon">
							<div class="mix user-interface interactive item" ideMetaIcon="7">
								<div class="workSquare">
									<div class="workContent">
										<div class="workTable">
											<div class="workCell">
												<img src="images/Botones/cerca_moder_mor.png" class="secondInnerIcon socarp-second-innner"/>
												<img src="images/Botones/cerca_moder_color.png" class="innerIcons socarp-inner">
											</div>
										</div>
									</div>
								</div>
								<span class="caption">Gobierno Cercano y Moderno</span>
							</div>
						</a>
						<a href="#0" id="generoIcon">
							<div class="mix user-interface interactive item" ideMetaIcon="8">
								<div class="workSquare">
									<div class="workContent">
										<div class="workTable">
											<div class="workCell">
												<img src="images/Botones/genero_mor.png" class="secondInnerIcon socarp-second-innner"/>
												<img src="images/Botones/genero_color.png" class="innerIcons socarp-inner">
											</div>
										</div>
									</div>
								</div>
								<span class="caption">Perspectiva de G&eacute;nero</span>
							</div>
						</a>
					</article>
				  </div>
				</section>
				<table id="programas_table" class="display" cellspacing="0" width="100%">
					<thead>
						<tr>
							<th class="programas">Programa</th>
							<th class="tipo">Tipo</th>
							<th id="btn-limp"class="btn-table btn-clean-table icon-refresh"><br>Limpiar</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
			</div>
		</div>
		<div class="page" ide="1">
			
		</div>
		<div class="page" ide="2">
			
		</div>
		<div class="page" ide="3">
			
		</div>
		<div class="page" ide="4">
			
		</div>
		<div class="page" ide="5">
			
		</div>
		<div class="page" ide="6">
			
		</div>
		<div class="page" ide="7">
			
		</div>
		<div class="page" ide="8">
			
		</div>
	</div><!-- /pages -->
</main>

<script src="js/jquery-2.1.0.js" type="text/javascript"></script>
<script src="js/modernizr_2.8.2.js" type="text/javascript"></script>
<script src="js/loader.pnd.js" type="text/javascript"></script>
<script src="js/modernizr-custom.js" type="text/javascript"></script>
<script src="js/classie.js" type="text/javascript"></script>
<script src="js/main.js" type="text/javascript"></script>
<script src="js/jquery.csv.js" type="text/javascript"></script>
<script type="text/javascript" src="js/dataTable-custom.js"></script>
<script src="js/transitions-indicadores.js" type="text/javascript"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<script type="text/javascript">
(function() {
	$('head').append('<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">');
	var pages = [].slice.call(document.querySelectorAll('.pages > .page')),
		currentPage = 0,
		antPage = 0,
		revealerOpts = {
			// the layers are the elements that move from the sides
			nmbLayers : 9,
			nmbTransitions : 1,
			// bg color of each layer
			bgcolor : ['#462b60','#24AF85', '#B297C7', '#6FBA69','#EE7436', '#118889', '#5BA199','#BCCF02', '#E84040'],
			bgImages : ['images/Botones/mex_paz_blan.png',
					'images/Botones/mex_paz_blan.png', 
					'images/Botones/mex_inclu_blan.png', 
					'images/Botones/mex_edu_blan.png',
					'images/Botones/mex_pros_blan.png', 
					'images/Botones/mex_global_blan.png', 
					'images/Botones/democra_blan.png', 
					'images/Botones/cerca_moder_blan.png', 
					'images/Botones/genero_blan.png'],
			bgTitles : ['Plan Nacional de Desarrollo',
				'M&eacute;xico en Paz',
				'M&eacute;xico Incluyente',
				'M&eacute;xico con Educaci&oacute;n de Calidad',
				'M&eacute;xico Pr&oacute;spero',
				'M&eacute;xico con Responsabilidad Global',
				'Democratizar la Productividad',
				'Gobierno Cercano y Moderno',
				'Perspectiva de G&eacute;nero'],
			// effect classname
			effect : 'anim--effect-1',
			onStart : function(direction) {
				// next page gets class page--animate-[direction]
				var nextPage = pages[currentPage];
				classie.add(nextPage, 'page--animate-' + direction);
			},
			onEnd : function(direction, prevPage) {
				// remove class page--animate-[direction] from next page
				var nextPage = pages[prevPage];
				nextPage.className = 'page';
			}
		};

	revealer = new Revealer(revealerOpts);

	function searchAntPage(){
		var ide = 0;
		$( ".page" ).each( function( index, element ){
    		if( $(element).hasClass('page--current') ){
    			ide = parseInt(element.getAttribute("ide"));
    		}
		});
		return ide;
	};

	// clicking the page nav buttons
	$("#pazIcon").click(function(){
		addFilterTable('1');
		return false;
	});
	$("#incluyenteIcon").click(function(){
		addFilterTable('2');
		return false;
	});
	$("#educacionIcon").click(function(){
		addFilterTable('3');
		return false;
	});
	$("#prosperoIcon").click(function(){
		addFilterTable('4');
		return false;
	});
	$("#globalIcon").click(function(){
		addFilterTable('5');
		return false;
	});
	$("#productividadIcon").click(function(){
		addFilterTable('6');
		return false;
	});
	$("#cercanoIcon").click(function(){
		addFilterTable('7');
		return false;
	});
	$("#generoIcon").click(function(){
		addFilterTable('8');
		return false;
	});

	function addFilterTable(meta_selected){
		$.fn.dataTableExt.afnFiltering.length = 0;
    	table_prog.draw();

		var initial = false;
		var desactiveAll = true;
		var sinFiltro = false;
		$("div.mix").each(function(index, el) {
			var ideMetaIcon = el.getAttribute('ideMetaIcon');
			if(ideMetaIcon != undefined && meta_selected != ideMetaIcon){
				if($(el).hasClass('item')){
					initial = true;
				}else{
					initial = false;
					return false;
				}
			}
		});

		$("div.mix").each(function(index, el) {
			var ideMetaIcon = el.getAttribute('ideMetaIcon');
			if(ideMetaIcon != undefined && meta_selected != ideMetaIcon){
				if($(el).hasClass('item')){
					desactiveAll = false;
				}else{
					desactiveAll = true;
					return false;
				}
			}
		});

		if(initial && $("div.mix[ideMetaIcon="+meta_selected+"]").hasClass('item')){
			$("div.mix").each(function(index, el) {
				var ideMetaIcon = el.getAttribute('ideMetaIcon');
				if(ideMetaIcon != undefined && meta_selected != ideMetaIcon){
					if(parseInt(ideMetaIcon) < 6){
						$(el).addClass('item_active');
						$(el).removeClass('item');
					}else if(parseInt(ideMetaIcon) > 5){
						$(el).addClass('item_active_inverse');
						$(el).removeClass('item');
					}
				}
			});
		}else if(desactiveAll && $("div.mix[ideMetaIcon="+meta_selected+"]").hasClass('item')){
			$("div.mix").each(function(index, el) {
				var ideMetaIcon = el.getAttribute('ideMetaIcon');
				if(ideMetaIcon != undefined && meta_selected != ideMetaIcon){
					if(parseInt(ideMetaIcon) < 6){
						$(el).addClass('item');
						$(el).removeClass('item_active');
					}else if(parseInt(ideMetaIcon) > 5){
						$(el).addClass('item');
						$(el).removeClass('item_active_inverse');
					}
				}
			});
			sinFiltro = true;
		}else if(desactiveAll && !$("div.mix[ideMetaIcon="+meta_selected+"]").hasClass('item')){
			$("div.mix").each(function(index, el) {
				var ideMetaIcon = el.getAttribute('ideMetaIcon');
				if(ideMetaIcon != undefined){
					if($(el).hasClass('item') && meta_selected != ideMetaIcon){
						if(parseInt(ideMetaIcon) < 6){
							$(el).addClass('item_active');
							$(el).removeClass('item');
						}else if(parseInt(ideMetaIcon) > 5){
							$(el).addClass('item_active_inverse');
							$(el).removeClass('item');
						}
					}else if(!$(el).hasClass('item') && meta_selected == ideMetaIcon){
						if(parseInt(ideMetaIcon) < 6){
							$(el).addClass('item');
							$(el).removeClass('item_active');
						}else if(parseInt(ideMetaIcon) > 5){
							$(el).addClass('item');
							$(el).removeClass('item_active_inverse');
						}
					}
				}
			});
		}
		
		if(!sinFiltro){
			$.fn.dataTableExt.afnFiltering.push(
			   	function( oSettings, aData, iDataIndex ) {
			   		var arrMetasFilter = String(table_prog.row(iDataIndex).data().ID_META_NACIONAL).split('#');
			   		for(var l in arrMetasFilter){
			   			if(arrMetasFilter[l] == meta_selected){
			   				return true;
			   			}
			   		}

	            	return false;
		        }
			);

			table_prog.draw();
		}
	}

	// triggers the effect by calling instance.reveal(direction, callbackTime, callbackFn)
	function reveal(direction, ide, antIde, descProg) {
		var callbackTime = 750,
			callbackFn = function() {
				classie.remove(pages[currentPage], 'page--current');
				antPage = antIde;
				currentPage = ide;
				classie.add(pages[ide], 'page--current');	
			};
		revealer.reveal(direction, callbackTime, callbackFn, ide, currentPage, descProg);
	}

	function goToByScroll(id){
        $('html,body').animate({
            scrollTop: $("#"+id).offset().top
        }, 'slow');
    }

    $("#loading-center").click(function() {
		$("#loading").fadeOut(500);
	});

	$("#loading").fadeOut(0);

	var mapColums = new Object();
	var mapValues = [];
	var mapColores = new Object();
	mapColores['1'] = "bg-paz";
	mapColores['2'] = "bg-incluyente";
	mapColores['3'] = "bg-educacion";
	mapColores['4'] = "bg-prospero";
	mapColores['5'] = "bg-global";
	mapColores['6'] = "bg-democra";
	mapColores['7'] = "bg-cercano";
	mapColores['8'] = "bg-genero";
	mapColores['0'] = "bg-inicio";
	var mapBtnColores = new Object();
	mapBtnColores['1'] = "btn-paz";
	mapBtnColores['2'] = "btn-incluyente";
	mapBtnColores['3'] = "btn-educacion";
	mapBtnColores['4'] = "btn-prospero";
	mapBtnColores['5'] = "btn-global";
	mapBtnColores['6'] = "btn-democra";
	mapBtnColores['7'] = "btn-cercano";
	mapBtnColores['8'] = "btn-genero";
	mapBtnColores['0'] = "btn-inicio";
	var mapTitlesColores = new Object();
	mapTitlesColores['1'] = "t-paz";
	mapTitlesColores['2'] = "t-incluyente";
	mapTitlesColores['3'] = "t-educacion";
	mapTitlesColores['4'] = "t-prospero";
	mapTitlesColores['5'] = "t-global";
	mapTitlesColores['6'] = "t-democra";
	mapTitlesColores['7'] = "t-cercano";
	mapTitlesColores['8'] = "t-genero";
	mapTitlesColores['0'] = "t-inicio";
	var mapIcons = new Object();
	mapIcons['1'] = "images/Botones/mex_paz_color.png";
	mapIcons['2'] = "images/Botones/mex_inclu_color.png";
	mapIcons['3'] = "images/Botones/mex_edu_color.png";
	mapIcons['4'] = "images/Botones/mex_pros_color.png";
	mapIcons['5'] = "images/Botones/mex_global_color.png";
	mapIcons['6'] = "images/Botones/democra_color.png";
	mapIcons['7'] = "images/Botones/cerca_moder_color.png";
	mapIcons['8'] = "images/Botones/genero_color.png";
	mapIcons['0'] = "btn-inicio";
	var idProgDeriv = 0;
	var idMetaNac = -1;
	var data = "";

	$('#programas_table thead th').each( function () {
        var title = $(this).text();
        if(title!="Limpiar"){
        	$(this).html( '<p>'+title+'&nbsp;'+'<input type="text" placeholder="Buscar por '+title+'" /></p>' );
        }
    });

	var table_prog = $('#programas_table').DataTable({
		"ordering" : false,
		"columns": [
            { "data": "DESC_ID_PROGRAMA_DERIVADO" },
            { "data": "TIPO_PROGRAMA_DERIVADO" },
            { "data": "ESPACIO"}
        ]

	});

	// Apply the search
    table_prog.columns().every( function () {
        var that = this;
        $( 'input', this.header() ).on( 'keyup change', function () {
            if ( that.search() !== this.value ) {
                that
                    .search( this.value )
                    .draw();
            }
        } );
    } );

	$.ajax({
		//url : 'files/file.txt',
		url : 'files/BD_PND.csv',
		dataType : 'text',
		contentType: "text/plain; charset=utf-8",
		async: true,
		success : function load(d) {
			data = $.csv.toArrays(d);
			
			generateTable(data);
			/**************************
			var html = generateTable(data);
      		$('#programas_table').empty();
      		$('#programas_table').html(html);
      		/**************************/
		}
	});

	$('#btn-limp').on('click', function(){
		table_prog.search( '' ).columns().search( '' ).draw();
		$('input').val("");
	});

    $('#programas_table tbody').on( 'click', 'tr', function () {
        if ( $(this).hasClass('selected') ) {
            $(this).removeClass('selected');
        }else {
            table_prog.$('tr.selected').removeClass('selected');
            $(this).addClass('selected');
        }
        idProgDeriv = $(this).attr('ide_prog_deriv');
        
        var totalActives = 0;
        $("div.mix").each(function(index, el) {
			var ideMetaIcon = el.getAttribute('ideMetaIcon');
			if(ideMetaIcon != undefined){
				if($(el).hasClass('item')){
					totalActives++;
					idMetaNac = ideMetaIcon;
				}
			}
		});
        coreProgramas(idProgDeriv, totalActives);

    });
	
	function coreProgramas(idProgDeriv, totalActives) {
        
        var arrMetasFilt = [];
        $.each(mapValues, function(i, v) {
      		if(v.ID_PROGRAMA_DERIVADO === idProgDeriv){

      			if(totalActives === 1 && idMetaNac != -1){
      				arrMetasFilt = String(v.ID_META_NACIONAL).split('#');
					reveal('bottom', idMetaNac, searchAntPage(), v.DESC_ID_PROGRAMA_DERIVADO);

	      			$("div.page[ide="+idMetaNac+"]").append("<div class='header-wrap "+getColorsMeta(idMetaNac)+"'><h2>"+v.DESC_ID_PROGRAMA_DERIVADO+"</h2></div>");
				}else{
					arrMetasFilt = String(v.ID_META_NACIONAL).split('#');
	      			var item = arrMetasFilt[Math.floor(Math.random()*arrMetasFilt.length)];
	      			if(item != 0){
	      				reveal('bottom', item, searchAntPage(), v.DESC_ID_PROGRAMA_DERIVADO);
	      			
	      				idMetaNac = item;
	      				$("div.page[ide="+idMetaNac+"]").append("<div class='header-wrap "+getColorsMeta(idMetaNac)+"'><h2>"+v.DESC_ID_PROGRAMA_DERIVADO+"</h2></div>");
	      			}
				}

      			return false;
      		}
		});
        
		var stringDivObj = '<div class="container-obj"><div class="head-button3"><a id="btn-return" class="viewWork2">Regresar a Men&uacute;</a></div><h1 class="title">Objetivos</h1><div class="content">';
		
		var mapObjetivos = [];
		var totalObjetivos = 0;
		for(var row in data) {
          	if(row > 0){
          		if(data[row][getValueColumn("ID_PROGRAMA_DERIVADO")] == idProgDeriv){
					var arrMetas = String(data[row][getValueColumn("ID_META_NACIONAL")]).split('#');
					for(var x in arrMetas){
						if(arrMetas[x] == idMetaNac){

							var itemMap = {};
			          		var exist = false;	
			          		itemMap["ID_OBJETIVO"] = data[row][getValueColumn("ID_OBJETIVO")];
			          		itemMap["DESC_OBJETIVO"] = data[row][getValueColumn("DESC_OBJETIVO")];

			          		$.each(mapObjetivos, function(i, v) {
				          		if(v.ID_OBJETIVO === itemMap["ID_OBJETIVO"]){
				          			exist = true;
				          			return false;
				          		}
							});

							if(!exist){
								totalObjetivos++;
				          		mapObjetivos.push(itemMap);
				          	}
						}
					}
          		}
          	}
        }

        if(totalObjetivos < 4){
    		stringDivObj+='<div class="grid">';
    		$.each(mapObjetivos, function(i, v) {
    			stringDivObj+='<figure class="effect-chico" ide="obj-'+(i+1)+'"><img src="images/mira_'+(i+1)+'.png" /><figcaption><h2><span>'+(i+1)+'</span></h2><p>'+v.DESC_OBJETIVO+'</p></figcaption></figure>';
			});
    		stringDivObj+='</div>';
        }else{
        	var cellByRow = totalObjetivos/2;
        	if(totalObjetivos%2 != 0){
        		cellByRow = Math.round(cellByRow);
        	}
    		stringDivObj+='<div class="grid">';
    		$.each(mapObjetivos, function(i, v) {
    			
    			if(cellByRow == i){
    				stringDivObj+='</div><div class="grid"><figure class="effect-chico" ide="obj-'+(i+1)+'"><img src="images/mira_'+(i+1)+'.png" /><figcaption><h2><span>'+(i+1)+'</span></h2><p>'+v.DESC_OBJETIVO+'</p></figcaption></figure>';
    			}else{
    				stringDivObj+='<figure class="effect-chico" ide="obj-'+(i+1)+'"><img src="images/mira_'+(i+1)+'.png" /><figcaption><h2><span>'+(i+1)+'</span></h2><p>'+v.DESC_OBJETIVO+'</p></figcaption></figure>';
    			}
			});
    		stringDivObj+='</div>';

        }
        stringDivObj+="</div>";

        var urlDownPrograma = '';
	    var urlDownDecreto = '';

        for(var row in data) {
	        if(row > 0){
	          	if(data[row][getValueColumn("ID_PROGRAMA_DERIVADO")] == idProgDeriv){
	          		urlDownPrograma = data[row][getValueColumn("URL_DOF_P-PND")];
	    			urlDownDecreto = data[row][getValueColumn("URL_DOF_DECRETO")];
	          	}
	        }
	    }

        stringDivObj+='<div class="content-buttons">';
        
        if(urlDownPrograma != undefined && urlDownPrograma != ''){
        	stringDivObj+='<a href="'+urlDownPrograma+'" class="btn '+getBtnColorsMeta(idMetaNac)+' btn-3a icon-cloud-download">Programa</a>';
        }
        if(urlDownDecreto != undefined && urlDownDecreto != ''){
        	stringDivObj+='<a href="'+urlDownDecreto+'" class="btn '+getBtnColorsMeta(idMetaNac)+' btn-3a icon-cloud-download">Decreto</a>';
        }

        stringDivObj+='<button class="btn '+getBtnColorsMeta(idMetaNac)+' btn-3b icon-cloud-download">Logros (LD)</button><button class="btn '+getBtnColorsMeta(idMetaNac)+' btn-3b icon-cloud-download">Datos abiertos</button></div>';

        stringDivObj+='<div class="content-buttons"><button class="btn '+getColorsMeta(idMetaNac)+' btn-3e"><span>11</span> Instituciones Participantes</button><button class="btn '+getColorsMeta(idMetaNac)+' btn-1b">Descarga la <span>Gu&iacute;a R&aacute;pida</span> del Programa<img src="images/guia_ciu.png"></button></div>';

        if(arrMetasFilt.length > 1){
        	stringDivObj+='<h2 class="title">Este programa tambi&eacute;n est&aacute; incluido en las siguientes metas...</h2><ul class = "metas-icons">';
        	for(var i in arrMetasFilt){
	        	if(arrMetasFilt[i] != idMetaNac && arrMetasFilt[i] != 0){
	        		stringDivObj+='<li class="go-meta" index-meta="'+arrMetasFilt[i]+'"><img src="'+getIcon(arrMetasFilt[i])+'" style="max-width: 50px;"></li>';
	        	}
	        }
			stringDivObj+='</ul>';	
        }

        /* cerrar container-obj*/
        stringDivObj+="</div>";

		$("div.page[ide="+idMetaNac+"]").append(stringDivObj);

		$.each(mapValues, function(i, v) {
      		if(v.ID_PROGRAMA_DERIVADO === idProgDeriv){
      			$("div.page[ide="+idMetaNac+"]").append("<div class='hero "+getColorsMeta(idMetaNac)+"'><h2>"+v.DESC_ID_PROGRAMA_DERIVADO+"</h2></div>");
      			return false;
      		}
		});

		$('head').append('<style>.hero:after{ border-top: solid 30px transparent; }</style>');

		$("#btn-return").click(function(){
			reveal('bottom', '0', searchAntPage());
			$('.footer-wrap').remove();
			$('.hero').remove();
			$('.container-obj').remove();
			$('.header-wrap').remove();
			$('.kontext').remove();
	        $('.footer-wrap').remove();
	        $('.bullets').remove();
	        $('.final').remove();
			return false;
		});

		$("li.go-meta").click(function(){
			
			var idMetaNacTMP = $(this).attr('index-meta');
			if(idMetaNacTMP != undefined && idMetaNacTMP != ''){
				idMetaNac = idMetaNacTMP;

				$('.footer-wrap').remove();
				$('.hero').remove();
				$('.container-obj').remove();
				$('.header-wrap').remove();
				$('.kontext').remove();
		        $('.footer-wrap').remove();
		        $('.bullets').remove();
		        $('.final').remove();

				coreProgramas(idProgDeriv, 1);
			}else{
				return false;	
			}
			
		});

		$("figure.effect-chico").click(function(e) { 
	        e.preventDefault(); 
	        $("#loading").fadeIn(200);
	        $('.kontext').remove();
	        $('.footer-wrap').remove();
	        $('.bullets').remove();
	        $('.final').remove();

	        $('head').append('<style>.hero:after{ border-top: solid 30px '+$('div.header-wrap').css('backgroundColor')+'; }</style>');

	        var idObjetivo = $(this).attr("ide").replace('obj-','');
	        var descObj = $(this).find('p').text();
	        
	        $("div.page[ide="+idMetaNac+"]").append('<div id="obj-'+idObjetivo+'" class="footer-wrap bg-inicio"><h2><span>Objetivo '+idObjetivo+'</span> '+descObj+'</h2></div>');

	        var stringIndicadores = '<article class="kontext">';
	        var firstInd = false;
	        for(var row in data) {
	          	if(row > 0){
	          		if(data[row][getValueColumn("ID_PROGRAMA_DERIVADO")] == idProgDeriv &&
	          			data[row][getValueColumn("ID_OBJETIVO")] == idObjetivo){
	          			var idIndicador = data[row][getValueColumn("ID_INDICADOR")];
	          			var descIndicador = data[row][getValueColumn("DESC_INDICADOR")];
	          			var fuente = data[row][getValueColumn("FUENTE")];
	          			var url_fuente = data[row][getValueColumn("URL_FUENTE")];
	          			var calculoIndicador = data[row][getValueColumn("CALCULO_INDICADOR")];
	          			var frecuencia = data[row][getValueColumn("FRECUENCIA")];
	          			var urCoordinadora = data[row][getValueColumn("DESC_UR_COORDINADORA")];

	          			stringIndicadores+=(!firstInd ? '<section class="layer show">' : '<section class="layer">');
	          			stringIndicadores+='<div class="container-ind"><div class="selectdiv"><h2><span>Indicador '+idIndicador+'</span> '+descIndicador+'</h2></div>';

	          			stringIndicadores+='<section class="container-divs"><div class="left-graf"><div id="grafica-container-'+row+'"></div><div class="fuente"><h2 class="'+getColorTitles(idMetaNac)+'">Fuente: <span>'+(fuente == undefined || fuente == '' ? 'Informaci&oacute;n no disponible' : fuente)+'</span></h2> <h3 class="t-inicio">'+(url_fuente == undefined || url_fuente == '' ? '' : '<a href="'+url_fuente+'" target="_blank">Ir a la fuente de la informaci&oacute;n</a>')+'</h3></div></div>';

	          			stringIndicadores+='<div class="right-desc"><div class="question"><h2 class="'+getColorTitles(idMetaNac)+'">&iquest;C&oacute;mo se mide?</h2><p>'+(calculoIndicador == undefined || calculoIndicador == '' ? 'Informaci&oacute;n no disponible' : calculoIndicador)+'</p></div><hr><div class="question"><h2 class="'+getColorTitles(idMetaNac)+'">&iquest;Cada cu&aacute;ndo?</h2><p>'+(frecuencia == undefined || frecuencia == '' ? 'Informaci&oacute;n no disponible' : frecuencia)+'</p></div><hr><div class="question"><h2 class="'+getColorTitles(idMetaNac)+'">'+(urCoordinadora == undefined || urCoordinadora == '' ? 'Informaci&oacute;n no disponible' : urCoordinadora)+'</h2></div><div class="question"> <h1 class="'+getColorTitles(idMetaNac)+'">8</h1></div><div class="question"> <h2 class="'+getColorTitles(idMetaNac)+'">Programas Presupuestarios Vinculados</h2></div><div class="scroll-list '+getColorsMeta(idMetaNac)+'"> <ul> <li>text</li><li>text</li><li>text</li><li>text</li><li>text</li><li>text</li><li>text</li><li>text</li><li>text</li><li>text</li></ul></div>';

	          			stringIndicadores+='</section>';

						stringIndicadores+='</div></section>';
						firstInd=true;
	          		}
	          	}
	        }
	        stringIndicadores+='</article><ul class="bullets"></ul><hr class="final">';
	        
	        $("div.page[ide="+idMetaNac+"]").append(firstInd ? stringIndicadores : '<h1 class="title">Actualmente no existe informaci&oacute;n de los indicadores.</h1><hr class="final">');

	        init_kontext();

	        for(var row in data) {
	          	if(row > 0){
	          		if(data[row][getValueColumn("ID_PROGRAMA_DERIVADO")] == idProgDeriv &&
	          			data[row][getValueColumn("ID_OBJETIVO")] == idObjetivo){
	          			var valLineaBase = data[row][getValueColumn("VALOR_LINEA_BASE")];
	          			var anoLineaBase = data[row][getValueColumn("AÑO_LINEA_BASE")];

	          			createGraph('grafica-container-'+row);

	          		}
	          	}
	        }

	        goToByScroll('obj-'+idObjetivo); 

	        $("#loading").fadeOut(400);
	    });

    };

	function generateTable(data) {

      if(typeof(data[0]) === 'undefined') {
        return null;
      }

      if(data[0].constructor === Array) {
        for(var item in data[0]) {
            mapColums[""+data[0][item]+""] = item;
        }
      }
      
      if(data[0].constructor === Array) {
      	
        for(var row in data) {
          if(row > 0){
          	var itemMap = {};
          	var exist = false;
          	itemMap["ID_META_NACIONAL"] = data[row][getValueColumn("ID_META_NACIONAL")];
          	itemMap["ID_PROGRAMA_DERIVADO"] = data[row][getValueColumn("ID_PROGRAMA_DERIVADO")];
          	itemMap["DESC_ID_PROGRAMA_DERIVADO"] = data[row][getValueColumn("DESC_ID_PROGRAMA_DERIVADO")];
          	itemMap["TIPO_PROGRAMA_DERIVADO"] = data[row][getValueColumn("TIPO_PROGRAMA_DERIVADO")];
          	itemMap["ESPACIO"] = "";
          	
          	$.each(mapValues, function(i, v) {
          		if(v.ID_PROGRAMA_DERIVADO === itemMap["ID_PROGRAMA_DERIVADO"]){

          			var idsMetasValues = String(v.ID_META_NACIONAL).split('#');
          			var idsMetasBd = String(itemMap["ID_META_NACIONAL"]).split('#');

          			$.each(idsMetasBd, function(k, valueBD) {
          				exist = false;
          				$.each(idsMetasValues, function(j, valueMap) {
          					if(valueBD === valueMap){
          						exist = true;
          						return;
          					}else{
          						return;
          					}
          				});
          				if(!exist){
          					v.ID_META_NACIONAL+="#"+valueBD;
          				}
          			});

          			exist = true;
          			return;
          		}
			});

          	if(!exist){
          		var rowProg = table_prog.row.add(itemMap).draw();
          		table_prog.rows(rowProg).nodes().to$().attr("ide_prog_deriv", itemMap["ID_PROGRAMA_DERIVADO"]);
          		mapValues.push(itemMap);
          	}
			
          }
          
        }
        //console.log(JSON.stringify(mapValues));
        //table_prog.rows.add(mapValues).draw();
      }

    }

    function getValueColumn(k) {
    	return mapColums[k];
	}

	function getColorsMeta(k) {
    	return mapColores[k];
	}

	function getBtnColorsMeta(k) {
    	return mapBtnColores[k];
	}

	function getIcon(k) {
    	return mapIcons[k];
	}

	function getColorTitles(k) {
    	return mapTitlesColores[k];
	}

	function init_kontext(){
		// Create a new instance of kontext
		var k = kontext( document.querySelector( '.kontext' ) );
		// API METHODS:
		// k.prev(); // Show prev layer
		// k.next(); // Show next layer
		// k.show( 3 ); // Show specific layer
		// k.getIndex(); // Index of current layer
		// k.getTotal(); // Total number of layers
		// DEMO-SPECIFIC:
		var bulletsContainer = document.body.querySelector( '.bullets' );
		// Create one bullet per layer
		for( var i = 0, len = k.getTotal(); i < len; i++ ) {
			var bullet = document.createElement( 'li' );
			var coverTitle = $('<span class="bulletTitle">Indicador '+(i+1)+'</span>').appendTo(bullet);
			bullet.className = i === 0 ? 'active' : '';
			bullet.setAttribute( 'index', i );
			bullet.onclick = function( event ) { k.show( event.target.getAttribute( 'index' ) ) };
			//bullet.ontouchstart = function( event ) { k.show( event.target.getAttribute( 'index' ) ) };
			bulletsContainer.appendChild( bullet );
		}
		// Update the bullets when the layer changes
		k.changed.add( function( layer, index ) {
			var bullets = document.body.querySelectorAll( '.bullets li' );
			for( var i = 0, len = bullets.length; i < len; i++ ) {
				bullets[i].className = i === index ? 'active' : '';
			}
		} );
	}

	function createGraph(idGraph){
		$('#'+idGraph).highcharts({
        chart: {
            zoomType: 'xy'
        },
        title: {
            text: ''
        },
        subtitle: {
            text: ''
        },
        xAxis: [{
            categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
            crosshair: true
        }],
        yAxis: [{ // Primary yAxis
            labels: {
                format: '{value}°C',
                style: {
                    color: Highcharts.getOptions().colors[1]
                }
            },
            title: {
                text: 'Temperature',
                style: {
                    color: Highcharts.getOptions().colors[1]
                }
            }
        }, { // Secondary yAxis
            title: {
                text: 'Rainfall',
                style: {
                    color: Highcharts.getOptions().colors[0]
                }
            },
            labels: {
                format: '{value} mm',
                style: {
                    color: Highcharts.getOptions().colors[0]
                }
            },
            opposite: true
        }],
        tooltip: {
            shared: true
        },
        legend: {
            layout: 'vertical',
            align: 'left',
            x: 120,
            verticalAlign: 'top',
            y: 100,
            floating: true,
            backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'
        },
        series: [{
            name: 'Rainfall',
            type: 'column',
            yAxis: 1,
            data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
            tooltip: {
                valueSuffix: ' mm'
            }

        }, {
            name: 'Temperature',
            type: 'spline',
            data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6],
            tooltip: {
                valueSuffix: '°C'
            }
        }]
    });
	};

})();

</script>
</body>
</html>